# CMCC_Coffee 项目结构

## 项目概述
CMCC_Coffee 是一个基于Flask的独立订单监控系统，专门为咖啡店设计，提供实时订单查看、声音提醒、弹窗通知和订单状态管理功能。

## 项目结构
```
CMCC_Coffe/
├── app.py              # 主应用文件 - Flask应用核心
├── start.py            # 启动脚本 - 系统启动入口
├── requirements.txt    # Python依赖文件
├── README.md          # 项目说明文档
├── 项目结构.md        # 项目结构说明（本文件）
├── test_api.py        # API测试文件（可选）
└── templates/         # HTML模板目录
    └── index.html     # 主页面模板
```

## 文件说明

### 核心文件

#### 1. app.py - 主应用文件
- **功能**: Flask应用的核心文件
- **主要组件**:
  - 模拟订单数据存储
  - 订单状态管理
  - API路由定义
  - 后台订单生成器
- **关键功能**:
  - 自动生成模拟订单
  - 订单状态更新
  - RESTful API接口
  - 数据统计功能

#### 2. start.py - 启动脚本
- **功能**: 系统启动入口
- **特点**: 
  - 友好的启动提示
  - 错误处理
  - 系统状态显示

#### 3. requirements.txt - 依赖文件
- **内容**:
  - Flask==2.3.3 (Web框架)
  - Werkzeug==2.3.7 (WSGI工具库)

### 模板文件

#### templates/index.html
- **功能**: 主页面模板
- **特性**:
  - 响应式设计
  - 现代化UI界面
  - 实时数据更新
  - 声音和弹窗提醒
  - 订单操作按钮

### 文档文件

#### README.md
- **内容**: 完整的项目说明文档
- **包含**: 安装指南、功能说明、API文档等

## 技术架构

### 后端技术栈
- **框架**: Flask 2.3.3
- **数据存储**: 内存存储（模拟数据库）
- **并发处理**: 多线程
- **API设计**: RESTful风格

### 前端技术栈
- **HTML5**: 语义化标签
- **CSS3**: 现代化样式
- **JavaScript**: 动态交互
- **响应式设计**: 支持多设备

### 数据模型

#### 订单状态
```python
PENDING_PAYMENT = 1      # 待付款
TO_BE_CONFIRMED = 2      # 待接单
CONFIRMED = 3            # 已接单
DELIVERY_IN_PROGRESS = 4 # 派送中
COMPLETED = 5            # 已完成
CANCELLED = 6            # 已取消
```

#### 订单数据结构
```python
{
    "id": 订单ID,
    "number": "订单号",
    "status": 状态码,
    "userName": "客户姓名",
    "phone": "联系电话",
    "address": "配送地址",
    "amount": 订单金额,
    "remark": "备注信息",
    "orderTime": "下单时间",
    "dishes": [菜品列表]
}
```

## API接口

### 主要接口
1. **GET /api/orders** - 获取待接单订单
2. **GET /api/orders/all** - 获取所有订单
3. **POST /api/order/{id}/{action}** - 更新订单状态
4. **GET /api/statistics** - 获取统计信息
5. **GET /api/orders/{status}** - 根据状态获取订单

## 功能特性

### 核心功能
- ✅ 实时订单监控
- ✅ 模拟订单生成
- ✅ 订单状态管理
- ✅ 声音和弹窗提醒
- ✅ 数据统计

### 界面特性
- ✅ 响应式设计
- ✅ 现代化UI
- ✅ 实时更新
- ✅ 操作反馈

## 运行环境

### 系统要求
- **操作系统**: Windows/macOS/Linux
- **Python版本**: 3.7+
- **内存**: 最低512MB
- **存储**: 最低100MB

### 依赖安装
```bash
pip install -r requirements.txt
```

### 启动命令
```bash
python start.py
# 或
python app.py
```

## 开发说明

### 扩展功能
1. **添加新API**: 在app.py中添加新路由
2. **修改界面**: 编辑templates/index.html
3. **调整数据**: 修改模拟数据生成逻辑
4. **添加数据库**: 替换内存存储为数据库

### 自定义配置
- **订单生成频率**: 修改background_order_generator中的sleep时间
- **生成概率**: 修改generate_mock_orders中的概率值
- **端口配置**: 修改app.run中的port参数

## 部署说明

### 开发环境
- 直接运行start.py即可

### 生产环境
- 使用Gunicorn或uWSGI
- 配置Nginx反向代理
- 添加数据库持久化

## 项目优势
1. **独立运行**: 无需外部依赖
2. **轻量级**: 资源占用少
3. **易扩展**: 模块化设计
4. **用户友好**: 直观的界面
5. **实时性**: 即时数据更新

这是一个功能完整、架构清晰的咖啡店订单监控系统。 